<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search bar</title>
    <link rel="shortcut icon" href="/images/bbb.png" type="image/png" />
    <link rel="stylesheet" href="/stylesheets/search-style.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    />
    <link href="/stylesheets/bootstrap.css" rel="stylesheet" />
    <link href="/stylesheets/fontawesome-all.css" rel="stylesheet" />
    <link href="/stylesheets/swiper.css" rel="stylesheet" />
    <link href="/stylesheets/magnific-popup.css" rel="stylesheet" />
    <link href="/stylesheets/styles.css" rel="stylesheet" />

    <link href="/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
  </head>
  <style>
    .im11 {
      max-width: 100%;
      height: 400px;
    }
    .phone123 {
      width: 25px;
      height: 25px;
      margin-top: 30px;
    }
    .section-title {
      text-align: center;
      padding-top: 60px;
      padding-bottom: 30px;
    }
    #post_box {
      background-color: rgb(145, 208, 239);
    }
  </style>
  <body style="background-color: #adadf5">
    <!-- Preloader -->
    <div class="spinner-wrapper">
      <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
      </div>
    </div>
    <!-- this is nav bar -->
    <% include ./partials/navbar %>
    <!-- this is nav  -->
    <div
      class="center-box"
      style="
        margin-top: 15%;
        width: 400px;
        text-align: center;
        margin-left: 35%;
        margin-bottom: 20px;
      "
    >
      <input
        id="input"
        type="text"
        class="search form-control"
        placeholder="What you looking for?"
      />
    </div>
    <div class="center-box">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="button-group filters-button-group row">
              <div class="col-lg-2">
                <input
                  type="checkbox"
                  class="button is-checked btn-filter"
                  id="tall"
                  data-filter="*"
                  checked
                  value=""
                /><label for="tall">အားလုံး</label>
              </div>
              <div class="col-lg-2">
                <input
                  type="checkbox"
                  id="t1"
                  class="button btn-filter"
                  data-filter=".typeone"
                  value="typeone"
                /><label for="t1">ဘုရားဖူးခရီးစဥ်</label>
              </div>
              <div class="col-lg-2">
                <input
                  type="checkbox"
                  class="button btn-filter"
                  id="t2"
                  data-filter=".typetwo"
                  value="typetwo"
                /><label for="t2">ကမ်းခြေခရီးစဉ်</label>
              </div>
              <div class="col-lg-2">
                <input
                  type="checkbox"
                  id="t3"
                  class="button btn-filter"
                  data-filter=".typethree"
                  value="typethree"
                /><label for="t3">လေ့လာရေးခရီးစဥ်</label>
              </div>
              <div class="col-lg-2">
                <input
                  type="checkbox"
                  id="t4"
                  class="button btn-filter"
                  data-filter=".typefour"
                  value="typefour"
                /><label for="t4">Express</label>
              </div>
              <div class="col-lg-2">
                <input
                  type="checkbox"
                  id="t5"
                  class="button btn-filter"
                  data-filter=".typefive"
                  value="typefive"
                /><label for="t5">ဟိုတယ်</label>
              </div>
            </div>
            <div class="grid">
              <% for (var k = 0 ; k < posts.length; k ++) {%>
              <div
                class="search-data element-item <%= (posts[k].type.includes('1'))? 'typeone':'' %> <%= (posts[k].type.includes('2'))? 'typetwo':'' %> <%= (posts[k].type.includes('3'))? 'typethree':'' %> <%= (posts[k].type.includes('4'))? 'typefour':'' %> <%= (posts[k].type.includes('5'))? 'typefive':'' %>"
                id="<%= posts[k]._id %>"
                data-value="<%= posts[k]._id %>"
              >
                <a class="popup-with-move-anim"
                  ><div class="element-item-overlay" id="post-text">
                    <span class="title"><%= posts[k].title%></span>
                  </div>
                  <a
                    href="/postdetail/<%= posts[k]._id %> "
                    class="portfolio-details-lightbox"
                    data-glightbox="type: external"
                  >
                    <img
                      class="blog123"
                      style="width: 210px"
                      src="<%= posts[k].image %>"
                      alt="Bagan"
                    />
                  </a>
                </a>
              </div>
              <%}%>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="project-1" class="lightbox-basic zoom-anim-dialog mfp-hide">
      <div class="row">
        <button
          title="Close (Esc)"
          type="button"
          class="mfp-close x-button"
          href="/search"
        >
          ×
        </button>
        <div class="col-lg-8">
          <img class="img-fluid im11" src="<%= posts.image %>" alt="Bagan" />
        </div>
        <div class="col-lg-4">
          <h3>ပုဂံ</h3>
          <hr class="line-heading" />
          <p><%= posts.content %></p>

          <div class="testimonial-container">
            <p class="testimonial-text">
              <img class="phone123" src="/images/phone-call.png" alt="phone" />
              <a href="#"><%= posts.phone%></a>
            </p>
            <p class="testimonial-author">
              <img class="phone123" src="/images/ag1.png" alt="agent" />
              အေးဂျင့်
            </p>
          </div>
          <a
            class="btn-solid-reg"
            href="https://technext.github.io/vacation/index.html"
            >အချက်အလက်များ</a
          >
          <a class="btn-outline-reg mfp-close as-button" href="/search"
            >နောက်သို့</a
          >
        </div>
      </div>
    </div>
    <% include ./partials/footer %>
  </body>

  <!-- Scripts -->
  <script src="/javascripts/jquery.min.js"></script>
  <!-- jQuery for Bootstrap's JavaScript plugins -->
  <script src="/javascripts/popper.min.js"></script>
  <!-- Popper tooltip library for Bootstrap -->
  <script src="/javascripts/bootstrap.min.js"></script>
  <!-- Bootstrap framework -->
  <!-- <script src="/javascripts/jquery.easing.min.js"></script> -->
  <!-- jQuery Easing for smooth scrolling between anchors -->
  <script src="/javascripts/swiper.min.js"></script>
  <!-- Swiper for image and text sliders -->
  <script src="/javascripts/jquery.magnific-popup.js"></script>
  <!-- Magnific Popup for lightboxes -->
  <script src="/javascripts/morphext.min.js"></script>
  <!-- Morphtext rotating text in the header -->
  <script src="/javascripts/isotope.pkgd.min.js"></script>
  <!-- Isotope for filter -->
  <script src="/javascripts/validator.min.js"></script>
  <!-- Validator.js - Bootstrap plugin that validates forms -->
  <script src="/javascripts/scripts.js"></script>

  <script src="/vendor/glightbox/js/glightbox.min.js"></script>

  <!-- Custom scripts -->

  <script>
    $(function () {
      /* Filter - Isotope */
      var $grid = $(".grid").isotope({
        // options
        itemSelector: ".element-item",
        layoutMode: "fitRows",
      });

      // filter items on button click
      $(".filters-button-group").on("click", "input", function () {
        var filterValue = $(this).attr("data-filter");
        $grid.isotope({ filter: filterValue });
      });
      var filterVal = "";
      $(".btn-filter").click(function (e) {
        filterVal = $(this).val() == "" ? "" : "." + $(this).val();
        $(".btn-filter").prop("checked", false);
        $(e.target).prop("checked", true);
      });
      $(".search").keyup(function () {
        var value = $(this).val().toLowerCase();
        var searchSplit = value.replace(/ /g, "'):containsi('");
        let hiddenClass = filterVal == "" ? ".element-item" : filterVal;
        // console.log($(hiddenClass));
        $(hiddenClass).each((e) => {
          if (
            $(hiddenClass)[
              e
            ].children[0].children[0].children[0].innerHTML.includes(
              searchSplit
            )
          ) {
            $(hiddenClass)[e].style.display = "";
          } else {
            // $(hiddenClass)[e];
            $(hiddenClass)[e].style.display = "none";
          }
        });
        var data = Array.from(
          $(filterVal + " .title").get(),
          (e) => e.innerHTML
        );
      });
    });
  </script>
</html>
